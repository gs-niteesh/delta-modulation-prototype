<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/scrollbars.css">
    <link rel="stylesheet" href="./css/checkmark.css">
    <link rel="stylesheet" href="./css/customslider.css">
    <title>Pulse Code Modulation</title>
</head>
<body>
    <script>
        var dFlag=true;
        var isQuantizationOn=true;
        var isPCMon = true;
        var isSamplingOn = true;
        function quantCheck()
        {
            setTimeout(function() { 
                isQuantizationOn=!isQuantizationOn;
            console.log(isQuantizationOn);
            if(isQuantizationOn==false && isPCMon==true)
            {
                alert("Quantization is turned off ! \nThis affects PCM output and hence PCM wave is being turned off.")
                document.getElementById("pcm_wave").click();
            }
            
             }, 500);
        }
        function pcm_check()
        {
            setTimeout(function() { 
                isPCMon = !isPCMon;
            if(isPCMon==true && (document.getElementById("quantized_points").checked==false || document.getElementById("sampled_points").checked==false) )
            {
                alert("PCM wave malfunctioned.\nTry again after turning On Sampling and Quantization !")
                document.getElementById("pcm_wave").click();
            }
            
             }, 400);
        }
        function sampCheck()
        {
                isSamplingOn = !isSamplingOn;    
        }
    </script>
    <h1 class="title">Pulse Code Modulation</h1>

    <div class="container">
        <div class="container-canvas">
            <canvas id="canvas"></canvas>
        </div>

        <br><br><br>

        <div id="container-split">
            <div id="container-checkbox">
                <h1 class="subtitle">Display</h1><br>
                <label class="checkbox-container"><span class="subspan">Show Unsampled wave</span>
                    <input type="checkbox" name="usw" id="unsampled_wave" checked>
                    <span class="checkmark"></span>
                </label><br>
                <label class="checkbox-container"><span class="subspan">Enable Sampling</span>
                    <input type="checkbox" name="sp" id="sampled_points" checked onchange="sampCheck()">
                    <span class="checkmark"></span>
                </label><br>
                <label class="checkbox-container"><span class="subspan">Enable Quantization</span>
                    <input type="checkbox" name="sq" id="quantized_points" checked onchange="quantCheck()">
                    <span class="checkmark"></span>
                </label><br>
                <label class="checkbox-container"  style="display:none;"><span class="subspan">Show Staircase wave</span>
                    <input type="checkbox" name="scw" id="staircase_wave">
                    <span class="checkmark"></span>
                </label><br style="display:none;">
                <label class="checkbox-container"><span class="subspan">Show PCM wave</span>
                    <input type="checkbox" name="pcmw" id="pcm_wave" checked onchange="pcm_check()">
                    <span class="checkmark"></span>
                </label><br>
            </div>
            <div class="container-variables">
                <div class="variables">
                    <h1 class="subtitle">Variables</h1>
                    <label for="fname" class="varname">Amplitude(V):</label><br>
                    <div class="slidecontainer">
                        <input type="range" min="2" max="20" step="1" value="10" class="slider" id="amplitude">
                    </div>
                    <label for="fname" class="varname">Frequency(hz):</label><br>
                    <div class="slidecontainer">
                        <input type="range" min="1" max="20" step="1" value="1" class="slider" id="frequency">
                    </div>
                    <label for="fname" class="varname">Sampling Frequency(hz):</label><br>
                    <div class="slidecontainer">
                        <input type="range" min="20" max="200" step="2" value="20" class="slider" id="sampling_frequency">
                    </div>
                    <label for="fname" class="varname">Vertical Scale:</label><br>
                    <div class="slidecontainer">
                        <input type="range" min="10" max="200" step="10" value="10" class="slider" id="vertical_scale_factor">
                    </div>
                    <label for="fname" class="varname">Horizontal Scale:</label><br>
                    <div class="slidecontainer">
                        <input type="range" min="20" max="200" step="10" value="50" class="slider" id="horizontal_scale_factor">
                    </div>
                    <label for="fname" class="varname">Bit Length:</label><br>
                    <div class="slidecontainer">
                        <input type="range" min="5" max="16" step="1" value="8" class="slider" id="bit_length_factor" onchange="dFlag=true;">
                    </div>
                </div>
            </div>

            <div class="container-result">
                <h1 class="subtitle">Result</h1>
                <h3>Wave Amplitude(V): <span id="Am"></span></h3>
                <h3>Wave Frequency(hz): <span id="Fm"></span></h3>
                <h3>Sampling Frequency(hz): <span id="Fs"></span> </h3>
                <h3>Delta: <span id="Delta"></span> </h3>
                <h3>Bit Length: <span id="BL"></span> </h3>
            </div>
        </div>
    </div>
    <br><br><br><br>

</body>
<script type="module" src="./js/main.js"></script>
</html>
